webpackJsonp([0],{252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.typingStarted="typingStarted",t.typingStopped="typingStopped",t.messageSendRequested="messageSendRequested"},269:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(164);var u=n(16),a=r(u),o=n(205),s=r(o),i=n(152),l=n(58),f=n(101),c=n(239),d=r(c),p=n(240),y=n(587),g=r(y),m=n(640),v=r(m),h=n(648),b=(new l.Map).set("messages",new l.List).set("users",new l.List).set("userIdsTyping",new l.Map).set("currentUser",new l.Map).set("currentUserIsTyping",!1);s.default.render(a.default.createElement(i.Provider,{store:function(){var e=[d.default.withExtraArgument({emit:h.emit})];e.push((0,p.createLogger)());var t=(0,f.createStore)(v.default,b,f.applyMiddleware.apply(void 0,e));return(0,h.init)(t),t}()},a.default.createElement(g.default,null)),document.getElementById("roop"))},587:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{messages:e.get("messages"),users:e.get("users"),currentUser:e.get("currentUser"),userIdsTyping:e.get("userIdsTyping")}}function i(e){return{dispatch:e,actions:(0,d.bindActionCreators)(v,e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(16),c=r(f),d=n(101),p=n(152),y=n(45),g=r(y),m=n(633),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),h=n(634),b=r(h),_=n(636),w=(r(_),n(638)),j=r(w),O=n(639),M=r(O),T=n(103),x=r(T),S={row:{margin:"0px",padding:"0px",display:"flex",flexFlow:"row nowrap"}},k=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.join=(0,x.default)(n.join,n),n.sendMessage=(0,x.default)(n.sendMessage,n),n.typing=(0,x.default)(n.typing,n),n}return o(t,e),l(t,[{key:"componentWillMount",value:function(){this.props.actions.startUp()}},{key:"join",value:function(e){this.props.actions.join(e)}},{key:"sendMessage",value:function(e){this.props.actions.sendMessage(e)}},{key:"typing",value:function(){this.props.actions.typing()}},{key:"renderForm",value:function(){return 0===this.props.currentUser.size?c.default.createElement(j.default,{join:this.join}):c.default.createElement(M.default,{typing:this.typing,sendMessage:this.sendMessage})}},{key:"render",value:function(){var e=this.props,t=e.messages,n=(e.users,e.userIdsTyping,this.renderForm());return c.default.createElement("div",null,c.default.createElement("div",{style:S.row},c.default.createElement(b.default,{messages:t})),c.default.createElement("div",{style:S.row},n))}}]),t}(f.Component);t.default=(0,g.default)((0,p.connect)(s,i)(k))},633:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(){return function(e,t,n){(0,n.emit)(d.usersRequested)}}function a(e){return function(t,n,r){(0,r.emit)(d.joinRequested,{name:e})}}function o(e){return function(t,n,r){var u=r.emit;n().get("currentUserIsTyping")&&(t({type:c.typingStopped}),u(d.userStoppedTyping)),t({type:c.messageSendRequested}),u(d.messageAdded,{message:e})}}function s(){return function(e,t,n){var r=n.emit;t().get("currentUserIsTyping")||(e({type:c.typingStarted}),r(d.userStartedTyping));var u=Date.now();setTimeout(function(){var n=t().get("currentUserIsTyping");Date.now()-u>=400&&n&&(e({type:c.typingStopped}),r(d.userStoppedTyping))},400)}}Object.defineProperty(t,"__esModule",{value:!0}),t.startUp=u,t.join=a,t.sendMessage=o,t.typing=s;var i=n(80),l=r(i),f=n(252),c=r(f),d=l.messageTypes},634:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(16),a=r(u),o=n(45),s=r(o),i=n(635),l=r(i),f={title:{margin:"0 0 5px 0",fontSize:"0.8em"},list:{margin:"4px",padding:"5px",border:"1px solid #8888bb",flex:"1 1 auto",order:1,maxWidth:"80%"}};t.default=(0,s.default)(function(e){var t=e.messages,n=null;return t.size>0&&(n=e.messages.map(function(e){var t=null;return e.get("user")&&(t=e.get("user").get("name")),a.default.createElement(l.default,{key:e.get("id"),name:t,createdAt:e.get("createdAt"),message:e.get("message")})})),a.default.createElement("div",{style:f.list},a.default.createElement("h2",{style:f.title},"Messages"),n)})},635:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(16),a=r(u),o=n(253),s=r(o),i=n(45),l=r(i),f={row:{fontSize:"0.5em"},name:{marginLeft:"5px"},text:{marginLeft:"5px",wordWrap:"break-word"}};t.default=(0,l.default)(function(e){var t=e.name,n=e.createdAt,r=e.message,u=null;return t&&(u=a.default.createElement("span",{style:f.name},t)),a.default.createElement("div",{style:f.row},a.default.createElement("span",null,(0,s.default)(n,"HH:MM:ss")),u,a.default.createElement("span",{style:f.text},r))})},636:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(16),a=r(u),o=n(45),s=r(o),i=n(637),l=r(i),f={title:{margin:"0 0 5px 0",fontSize:"0.8em"},list:{margin:"4px",padding:"5px",border:"1px solid #8888bb",flex:"0 1 auto",order:1,minWidth:"210px",maxWidth:"20%"}};t.default=(0,s.default)(function(e){var t=e.users,n=e.userIdsTyping,r=null;return t.size>0&&(r=t.map(function(e){var t=e.get("id");return a.default.createElement(l.default,{key:t,userName:e.get("name"),userIsTyping:n.has(t)})})),a.default.createElement("div",{style:f.list},a.default.createElement("h2",{style:f.title},"Users"),r)})},637:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(16),a=r(u),o=n(45),s=r(o),i={userName:{fontSize:"0.5em",wordWrap:"break-word"}};t.default=(0,s.default)(function(e){var t=e.userName,n=e.userIsTyping,r=null;return n&&(r=" (typing)"),a.default.createElement("div",{style:i.userName},t," ",r)})},638:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),l=r(i),f=n(45),c=r(f),d=n(103),p=r(d),y={form:{margin:0,width:"100%"}},g=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onJoinClick=(0,p.default)(n.onJoinClick,n),n.checkName=(0,p.default)(n.checkName,n),n.state={valid:!1,name:null},n}return o(t,e),s(t,[{key:"onJoinClick",value:function(e){e.preventDefault(),this.state.valid&&this.props.join(this.refs.nameInput.value)}},{key:"checkName",value:function(e){var t=e.target.value,n=t&&t.length>0;this.setState({valid:n,name:t}),n&&"keydown"===e.type&&13===e.keyCode&&this.props.join(t)}},{key:"render",value:function(){var e=!0;return this.state.valid&&(e=!1),l.default.createElement("div",{style:y.form},l.default.createElement("input",{type:"text",maxLength:"20",placeholder:"Your name",ref:"nameInput",onKeyDown:this.checkName,onChange:this.checkName}),l.default.createElement("button",{onClick:this.onJoinClick,disabled:e},"Join"))}}]),t}(i.Component);t.default=(0,c.default)(g)},639:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),l=r(i),f=n(45),c=r(f),d=n(103),p=r(d),y={form:{margin:"0 0 0 0",padding:"5px",width:"100%"},textarea:{height:"auto",width:"auto"}},g=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSendClick=(0,p.default)(n.onSendClick,n),n.onTextareaKeyDown=(0,p.default)(n.onTextareaKeyDown,n),n.onTextareaChange=(0,p.default)(n.onTextareaChange,n),n.state={valid:!1,name:null},n}return o(t,e),s(t,[{key:"onSendClick",value:function(e){e.preventDefault(),this.state.valid&&(this.state.typing&&(this.state.typing=!1,this.props.typingStopped()),this.props.sendMessage(this.refs.messageInput.value),this.refs.messageInput.value="")}},{key:"onTextareaChange",value:function(e){var t=e.target.value,n=t&&t.length>0;this.setState({valid:n,message:t})}},{key:"onTextareaKeyDown",value:function(e){this.props.typing()}},{key:"render",value:function(){var e=!0;return this.state.valid&&(e=!1),l.default.createElement("div",{style:y.form},l.default.createElement("textarea",{style:y.textarea,ref:"messageInput",placeholder:"Say something nice",maxLength:"500",rows:"2",cols:"40",onChange:this.onTextareaChange,onKeyDown:this.onTextareaKeyDown}),l.default.createElement("button",{onClick:this.onSendClick,disabled:e},"Send"))}}]),t}(i.Component);t.default=(0,c.default)(g)},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(254),u=n(645),a=n(646),o=n(647);t.default=(0,r.combineReducers)({messages:o.messages,users:a.users,userIdsTyping:a.userIdsTyping,currentUser:u.currentUser,currentUserIsTyping:u.currentUserIsTyping})},645:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.currentUserIsTyping=t.currentUser=void 0;var u=n(58),a=function(e){return e&&e.__esModule?e:{default:e}}(u),o=n(80),s=r(o),i=n(252),l=r(i),f=s.messageTypes,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.Map,t=arguments[1];return t.type===f.joinRequested?a.default.fromJS(t.payload):e},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return t.type===l.typingStarted||t.type!==l.typingStopped&&e};t.currentUser=c,t.currentUserIsTyping=d},646:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.userIdsTyping=t.users=void 0;var u=n(58),a=function(e){return e&&e.__esModule?e:{default:e}}(u),o=n(80),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),i=s.messageTypes,l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.List,n=arguments[1],o=function(e){return t.includes(e)?t:t.push(a.default.fromJS(e)).sort(function(e,t){return e.get("name").localeCompare(t.get("name"))})},s=(e={},r(e,i.usersRequested,function(e,t){return a.default.fromJS(t.payload)}),r(e,i.userLeft,function(e,t){return e.filter(function(e){return e.get("id")!==t.payload.userId})}),r(e,i.joinRequested,function(e,t){return o(t.payload)}),r(e,i.userJoined,function(e,t){return o(t.payload)}),e),l=s[n.type];return l?l(t,n):t},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.Map,t=arguments[1];return t.type===i.userStartedTyping?e.set(t.payload.userId,!0):t.type===i.userStoppedTyping?e.delete(t.payload.userId):e};t.users=l,t.userIdsTyping=f},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages=void 0;var r=n(58),u=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(80),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=o.messageTypes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.List,t=arguments[1];return t.type===s.messageAdded?e.push(u.default.fromJS(t.payload)):e};t.messages=i},648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emit=t.init=void 0;var r=n(256),u=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(80),o=(0,u.default)(a.uri),s=function(e){Object.keys(a.messageTypes).forEach(function(t){return o.on(t,function(n){return e.dispatch({type:t,payload:n})})})},i=function(e,t){return o.emit(e,t)};t.init=s,t.emit=i},80:function(e,t,n){"use strict";var r="silly-chat.localtest.me",u=["userJoined","userLeft","joinRequested","usersRequested","userStartedTyping","userStoppedTyping","messageAdded","userRefreshed"].reduce(function(e,t){return e[t]=t,e},{});e.exports={port:3e3,host:r,messageTypes:u,uri:"http://"+r+":3000"}}},[269]);